{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PFL Academy State Data Schema",
  "description": "Comprehensive state-specific data for personalizing L-chapter content across all 50 states",
  "version": "1.0.0",
  "type": "object",
  "required": ["state_name", "state_code", "last_updated"],
  "properties": {
    "state_name": {
      "type": "string",
      "description": "Full state name (e.g., 'Texas')",
      "examples": ["Texas", "California", "Virginia"]
    },
    "state_code": {
      "type": "string",
      "pattern": "^[A-Z]{2}$",
      "description": "Two-letter state code",
      "examples": ["TX", "CA", "VA"]
    },
    "last_updated": {
      "type": "string",
      "format": "date",
      "description": "Date this state data was last updated (YYYY-MM-DD)"
    },
    "data_sources": {
      "type": "object",
      "description": "URLs to official state sources for verification",
      "properties": {
        "dmv_url": {
          "type": "string",
          "format": "uri",
          "description": "State DMV/Motor Vehicles website"
        },
        "tax_authority_url": {
          "type": "string",
          "format": "uri",
          "description": "State Department of Revenue or Tax Commission"
        },
        "labor_department_url": {
          "type": "string",
          "format": "uri",
          "description": "State Department of Labor or Employment"
        },
        "education_department_url": {
          "type": "string",
          "format": "uri",
          "description": "State Department of Education or Higher Education"
        },
        "consumer_protection_url": {
          "type": "string",
          "format": "uri",
          "description": "State consumer protection agency"
        },
        "property_tax_assessor_url": {
          "type": "string",
          "format": "uri",
          "description": "County assessor or statewide property tax lookup"
        }
      }
    },
    "automotive": {
      "type": "object",
      "description": "Automotive finance and registration data (L-46)",
      "properties": {
        "registration_initial": {
          "type": "number",
          "description": "Initial registration/title fee ($)",
          "minimum": 0
        },
        "registration_annual": {
          "type": "number",
          "description": "Annual registration renewal fee ($)",
          "minimum": 0
        },
        "avg_auto_loan_rate_new": {
          "type": "number",
          "description": "Average interest rate for new car loans (%)",
          "minimum": 0,
          "maximum": 30
        },
        "avg_auto_loan_rate_used": {
          "type": "number",
          "description": "Average interest rate for used car loans (%)",
          "minimum": 0,
          "maximum": 30
        },
        "insurance_avg_teen": {
          "type": "number",
          "description": "Average monthly car insurance for teen drivers ($)",
          "minimum": 0
        },
        "insurance_comparison_url": {
          "type": "string",
          "format": "uri",
          "description": "State insurance comparison website or commissioner site"
        },
        "lease_acquisition_fee": {
          "type": "number",
          "description": "Typical lease acquisition fee ($)",
          "minimum": 0
        },
        "inspection_required": {
          "type": "boolean",
          "description": "Whether state requires emissions/safety inspection"
        },
        "inspection_cost": {
          "type": "number",
          "description": "Annual inspection cost if required ($)",
          "minimum": 0
        },
        "gas_price_current": {
          "type": "number",
          "description": "Current average gas price per gallon ($)",
          "minimum": 0
        },
        "dmv_url": {
          "type": "string",
          "format": "uri",
          "description": "State DMV website"
        }
      },
      "required": ["registration_initial", "registration_annual", "insurance_avg_teen"]
    },
    "taxes": {
      "type": "object",
      "description": "State and local tax data (L-46, L-49, L-50, L-59)",
      "properties": {
        "sales_tax": {
          "type": "number",
          "description": "State sales tax rate (%)",
          "minimum": 0,
          "maximum": 15
        },
        "local_sales_tax_min": {
          "type": "number",
          "description": "Minimum local sales tax rate (%)",
          "minimum": 0
        },
        "local_sales_tax_max": {
          "type": "number",
          "description": "Maximum local sales tax rate (%)",
          "minimum": 0
        },
        "combined_sales_tax_min": {
          "type": "number",
          "description": "Minimum combined (state + local) sales tax (%)",
          "minimum": 0
        },
        "combined_sales_tax_max": {
          "type": "number",
          "description": "Maximum combined (state + local) sales tax (%)",
          "minimum": 0
        },
        "local_sales_tax_examples": {
          "type": "array",
          "description": "Example cities with their local sales tax rates",
          "items": {
            "type": "object",
            "properties": {
              "city": {"type": "string"},
              "local_rate": {"type": "number"},
              "combined_rate": {"type": "number"}
            }
          }
        },
        "allows_local_income_tax": {
          "type": "boolean",
          "description": "Whether state allows local income taxes"
        },
        "local_income_tax_range": {
          "type": "string",
          "description": "Range of local income tax rates (e.g., '0-2.5%')"
        },
        "local_income_tax_rate_low": {
          "type": "number",
          "description": "Low example local income tax rate (%)",
          "minimum": 0
        },
        "local_income_tax_rate_high": {
          "type": "number",
          "description": "High example local income tax rate (%)",
          "minimum": 0
        },
        "local_income_tax_example": {
          "type": "string",
          "description": "Example city/county with local income tax"
        },
        "property_tax_county_rate": {
          "type": "number",
          "description": "Example county property tax rate (mills or %)",
          "minimum": 0
        },
        "property_tax_school_rate": {
          "type": "number",
          "description": "Example school district property tax rate (mills)",
          "minimum": 0
        },
        "property_tax_special_rate": {
          "type": "number",
          "description": "Example special district rate (mills)",
          "minimum": 0
        },
        "property_tax_city_range": {
          "type": "string",
          "description": "Range of city property tax rates"
        },
        "property_tax_examples": {
          "type": "array",
          "description": "Example cities/counties with total millage rates",
          "items": {
            "type": "object",
            "properties": {
              "location": {"type": "string"},
              "millage": {"type": "number"},
              "description": {"type": "string"}
            }
          }
        },
        "assessment_percentage": {
          "type": "number",
          "description": "Percentage of market value used for assessment (%)",
          "minimum": 0,
          "maximum": 100
        },
        "homestead_exemption": {
          "type": "number",
          "description": "Homestead exemption amount ($)",
          "minimum": 0
        },
        "property_assessment_frequency": {
          "type": "string",
          "description": "How often properties are reassessed (e.g., 'Annual', 'Every 3 years')"
        },
        "assessment_appeal_process": {
          "type": "string",
          "description": "Brief description of assessment appeal process"
        },
        "assessment_appeal_deadline": {
          "type": "string",
          "description": "Typical deadline for filing appeals"
        },
        "assessment_appeal_form_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to assessment appeal forms"
        },
        "has_tax_cap": {
          "type": "boolean",
          "description": "Whether state has property tax growth cap"
        },
        "county_name": {
          "type": "string",
          "description": "Example county for demonstrations"
        },
        "county_assessor_contact": {
          "type": "string",
          "description": "Contact info for county assessor"
        },
        "county_tax_assessor_url": {
          "type": "string",
          "format": "uri",
          "description": "County assessor website"
        },
        "property_tax_lookup_url": {
          "type": "string",
          "format": "uri",
          "description": "Statewide property tax lookup tool"
        },
        "tax_incentives": {
          "type": "string",
          "description": "Brief description of state tax incentives for education/savings"
        },
        "tax_structure": {
          "type": "string",
          "description": "Brief description of state tax structure"
        }
      },
      "required": ["sales_tax", "assessment_percentage"]
    },
    "housing": {
      "type": "object",
      "description": "Housing market data (L-50, L-59)",
      "properties": {
        "median_home_price": {
          "type": "number",
          "description": "Median home price ($)",
          "minimum": 0
        },
        "median_rent": {
          "type": "number",
          "description": "Median monthly rent ($)",
          "minimum": 0
        },
        "housing_market_trends": {
          "type": "string",
          "description": "Brief description of current housing market (rising, stable, declining)"
        },
        "first_time_homebuyer_program": {
          "type": "string",
          "description": "Name and brief description of state first-time homebuyer program"
        },
        "avg_mortgage_rate_30yr": {
          "type": "number",
          "description": "Average 30-year mortgage rate in state (%)",
          "minimum": 0
        }
      },
      "required": ["median_home_price", "median_rent"]
    },
    "employment": {
      "type": "object",
      "description": "Employment and labor market data (L-49, L-50)",
      "properties": {
        "min_wage": {
          "type": "number",
          "description": "State minimum wage ($/hour)",
          "minimum": 0
        },
        "unemployment_rate": {
          "type": "number",
          "description": "Current unemployment rate (%)",
          "minimum": 0,
          "maximum": 100
        },
        "major_industries": {
          "type": "string",
          "description": "Comma-separated list of state's major industries"
        }
      },
      "required": ["min_wage", "unemployment_rate", "major_industries"]
    },
    "education": {
      "type": "object",
      "description": "Education costs and programs (L-49, L-50)",
      "properties": {
        "tuition_public": {
          "type": "number",
          "description": "Average annual in-state tuition at public universities ($)",
          "minimum": 0
        }
      },
      "required": ["tuition_public"]
    },
    "banking": {
      "type": "object",
      "description": "Banking and financial services (L-56)",
      "properties": {
        "avg_monthly_fee": {
          "type": "number",
          "description": "Average bank monthly maintenance fee ($)",
          "minimum": 0
        },
        "avg_overdraft_fee": {
          "type": "number",
          "description": "Average overdraft fee ($)",
          "minimum": 0
        },
        "credit_union_association_url": {
          "type": "string",
          "format": "uri",
          "description": "State credit union association website"
        },
        "minor_banking_rules": {
          "type": "string",
          "description": "Brief description of state rules for minors opening bank accounts"
        }
      }
    },
    "consumer_protection": {
      "type": "object",
      "description": "Consumer protection resources (L-61)",
      "properties": {
        "consumer_protection_agency": {
          "type": "string",
          "description": "Name of state consumer protection agency"
        },
        "consumer_protection_url": {
          "type": "string",
          "format": "uri",
          "description": "State consumer protection website"
        }
      }
    },
    "local_examples": {
      "type": "object",
      "description": "Local business examples for personalization",
      "properties": {
        "major_retailers": {
          "type": "string",
          "description": "Comma-separated list of major retailers in state"
        },
        "telecom_providers": {
          "type": "string",
          "description": "Comma-separated list of telecom providers"
        },
        "utility_providers": {
          "type": "string",
          "description": "Comma-separated list of major utility providers"
        },
        "healthcare_market": {
          "type": "string",
          "description": "Description of state healthcare insurance market"
        },
        "local_credit_union_name": {
          "type": "string",
          "description": "Example local credit union name"
        },
        "local_nonprofit_name": {
          "type": "string",
          "description": "Example local nonprofit organization name"
        },
        "major_city": {
          "type": "string",
          "description": "Largest or most prominent city for examples"
        },
        "suburb_city": {
          "type": "string",
          "description": "Example suburban city"
        },
        "rural_area": {
          "type": "string",
          "description": "Example rural area or small town"
        }
      }
    },
    "notes": {
      "type": "string",
      "description": "Any state-specific notes, exceptions, or special considerations"
    }
  }
}
